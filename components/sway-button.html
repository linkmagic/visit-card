<template>
	<style>
    .sway-button {
      display: inline-block;
      height: 45px;
    }
    .background-layer {
      position: relative;
      height: 45px;
      background-color: #262721;
      border-radius: 6px;
      filter: blur(2px);
      transition: 0.2s;
    }
    .middle-layer {
      position: relative;
      top: -50px;
      height: 45px;
      /* background-color: #008800; */
      border-radius: 6px;
    }
    .foreground-layer {
      position: relative;
      top: -100px;
      height: 45px;
      padding: 0 16px;
      /* background-color: #00b100; */
      border-radius: 6px;
      text-align: center;
      transition: 0.2s;
    }
    /* .foreground-layer:hover { */
      /* background-color: #00a700; */
    /* } */
    .svg-label {
      position: relative;
      top: 14px;
      left: -6px;
    }
    .text-label {
      position: relative;
      top: 6px;
      font-family: Arial, Helvetica, sans-serif;
      font-size: 20px;
      font-weight: bold;
      color: white;
    }
    .facebook-fg-color {
      background-color: #3c5a9a;
    }
    .facebook-md-color {
      background-color: #2f4370;
    }
    .github-fg-color {
      background-color: #4f4f4f;
    }
    .github-md-color {
      background-color: #353535;
    }
    .linkedin-fg-color {
      background-color: #0077b5;
    }
    .linkedin-md-color {
      background-color: #003e5e;
    }
    .mail-fg-color {
      background-color: #c60202;
    }
    .mail-md-color {
      background-color: #800202;
    }
  </style>
  <div id="idSwayButton" class="sway-button">
    <div class="background-layer"></div>
    <div class="middle-layer"></div>
    <div class="foreground-layer">
      <span class="svg-label"></span>
      <span class="text-label"></span>
    </div>
  </div>
</template>

<script>
	(function (window, document, undefined) {
    
    String.prototype.capitalize = function() {
      return this.replace(/(?:^|\s)\S/g, function(a) {
        return a.toUpperCase(); 
      });
    };

    var Icons = (function () {
			var icons = {
				"facebook": "M27.845,47.469V27.81h8.426l1.404-8.425h-9.83v-4.213c0-2.81,1.406-4.213,4.213-4.213h4.213V2.531 c-1.405,0-4.55,0-7.021,0c-7.021,0-9.83,4.213-9.83,11.234v5.618h-8.425v8.424h8.425v19.661H27.845L27.845,47.469z",
        "github": "M24.999,2.48c-12.75,0-23.087,10.338-23.087,23.09c0,10.199,6.613,18.854,15.791,21.907 c1.154,0.211,1.518-0.474,1.518-1.084c0-0.547,0.011-2.082,0-4.01c-6.422,1.398-7.753-3.038-7.753-3.038 c-1.048-2.671-2.562-3.377-2.562-3.377c-2.095-1.433,0.158-1.407,0.158-1.407c2.317,0.163,3.538,2.383,3.538,2.383 c2.059,3.522,5.403,2.505,6.717,1.916c0.21-1.491,0.808-2.51,1.468-3.087C15.66,35.188,10.27,33.211,10.27,24.361 c0-2.521,0.9-4.581,2.376-6.194c-0.239-0.584-1.031-2.932,0.226-6.112c0,0,1.939-0.62,6.349,2.369 c1.841-0.513,3.817-0.768,5.78-0.777c1.962,0.009,3.938,0.264,5.781,0.777c4.409-2.988,6.346-2.369,6.346-2.369 c1.258,3.18,0.466,5.528,0.229,6.112c1.478,1.613,2.373,3.673,2.373,6.194c0,8.872-5.397,10.823-10.543,11.392 c0.828,0.717,1.582,2.101,1.582,4.255c0,2.887,0,5.632,0,6.392c0,0.617,0.372,1.302,1.544,1.076 c9.167-3.059,15.776-11.708,15.776-21.905C48.089,12.818,37.75,2.48,24.999,2.48z",
        "codepen": "M37.311,57.856c-20.517,0-37.149,16.632-37.149,37.149c0,20.517,16.632,37.148,37.149,37.148s37.148-16.631,37.148-37.148	C74.459,74.489,57.828,57.856,37.311,57.856z M37.311,126.053c-17.119,0-31.048-13.929-31.048-31.048s13.929-31.048,31.048-31.048	s31.047,13.929,31.047,31.048S54.43,126.053,37.311,126.053z M60.263,87.75c-0.004-0.029-0.012-0.057-0.016-0.086	c-0.01-0.056-0.02-0.111-0.035-0.166c-0.008-0.033-0.02-0.064-0.031-0.095c-0.016-0.048-0.032-0.096-0.05-0.144	c-0.014-0.033-0.029-0.065-0.044-0.097c-0.02-0.044-0.042-0.088-0.067-0.13c-0.018-0.032-0.038-0.062-0.056-0.092	c-0.027-0.041-0.054-0.081-0.083-0.119c-0.021-0.029-0.044-0.058-0.067-0.086c-0.032-0.036-0.064-0.072-0.099-0.106	c-0.026-0.026-0.051-0.053-0.078-0.077c-0.036-0.033-0.074-0.064-0.111-0.094c-0.03-0.023-0.059-0.046-0.09-0.067	c-0.012-0.007-0.021-0.017-0.033-0.024L38.406,72.368c-0.663-0.442-1.527-0.442-2.19,0L15.22,86.365	c-0.011,0.007-0.021,0.017-0.033,0.024c-0.031,0.022-0.06,0.045-0.089,0.067c-0.039,0.031-0.076,0.062-0.112,0.094	c-0.028,0.024-0.053,0.051-0.079,0.078c-0.034,0.034-0.067,0.07-0.098,0.106c-0.023,0.028-0.046,0.056-0.068,0.085 c-0.029,0.038-0.057,0.079-0.083,0.12c-0.02,0.03-0.039,0.061-0.057,0.091c-0.024,0.042-0.046,0.086-0.067,0.13	c-0.015,0.031-0.031,0.064-0.044,0.096c-0.02,0.047-0.036,0.095-0.051,0.144c-0.011,0.031-0.022,0.063-0.031,0.095	c-0.014,0.054-0.024,0.109-0.035,0.166c-0.005,0.029-0.012,0.057-0.016,0.086c-0.012,0.084-0.018,0.17-0.018,0.257v13.997	c0,0.087,0.006,0.173,0.018,0.259c0.004,0.028,0.011,0.057,0.016,0.085c0.011,0.056,0.02,0.112,0.035,0.166	c0.009,0.033,0.021,0.064,0.031,0.095c0.015,0.048,0.031,0.096,0.051,0.144c0.013,0.033,0.029,0.064,0.044,0.096	c0.021,0.044,0.042,0.088,0.067,0.132c0.018,0.031,0.037,0.061,0.057,0.09c0.026,0.042,0.054,0.082,0.083,0.12	c0.022,0.03,0.044,0.059,0.068,0.086c0.031,0.037,0.064,0.072,0.098,0.106c0.026,0.027,0.051,0.053,0.079,0.077	c0.036,0.032,0.073,0.064,0.112,0.093c0.029,0.023,0.058,0.046,0.089,0.068c0.012,0.007,0.022,0.017,0.033,0.024l20.996,13.998	c0.332,0.221,0.713,0.333,1.095,0.333c0.381,0,0.764-0.112,1.095-0.333l20.996-13.996c0.011-0.007,0.021-0.017,0.033-0.024	c0.031-0.021,0.061-0.044,0.089-0.067c0.039-0.03,0.075-0.062,0.112-0.094c0.027-0.024,0.053-0.05,0.079-0.077	c0.035-0.034,0.067-0.07,0.099-0.106c0.023-0.028,0.046-0.056,0.067-0.086c0.03-0.039,0.058-0.079,0.084-0.12	c0.018-0.03,0.038-0.061,0.056-0.091c0.024-0.042,0.046-0.087,0.067-0.132c0.014-0.032,0.031-0.063,0.043-0.095	c0.02-0.048,0.036-0.096,0.051-0.145c0.01-0.031,0.022-0.063,0.031-0.095c0.014-0.055,0.025-0.11,0.035-0.167	c0.005-0.028,0.012-0.056,0.016-0.084c0.011-0.086,0.017-0.171,0.017-0.259V88.007C60.281,87.92,60.274,87.834,60.263,87.75z	 M39.284,77.699L54.752,88.01l-6.908,4.622l-8.559-5.725L39.284,77.699L39.284,77.699z M35.337,77.699v9.208l-8.558,5.725	L19.87,88.01L35.337,77.699z M18.289,91.702l4.939,3.303l-4.939,3.303V91.702z M35.337,112.313L19.87,102.001l6.909-4.621	l8.558,5.724V112.313z M37.311,99.675l-6.982-4.67l6.982-4.669l6.981,4.669L37.311,99.675z M39.284,112.313v-9.208l8.559-5.724	l6.909,4.621L39.284,112.313z M56.333,98.309l-4.938-3.304l4.938-3.303V98.309z",
				"linkedin": "M13.83,41.668H5.401V13.571h8.429V41.668z M44.737,41.668h-8.429V26.66c0-3.912-1.394-5.857-4.154-5.857 c-2.189,0-3.577,1.086-4.274,3.273c0,3.545,0,17.592,0,17.592h-8.431c0,0,0.115-25.288,0-28.097h6.656l0.514,5.619h0.175 c1.729-2.81,4.489-4.713,8.275-4.713c2.881,0,5.207,0.801,6.985,2.815c1.794,2.014,2.684,4.713,2.684,8.514V41.668z M9.615,2.333 c2.404,0,4.357,1.888,4.357,4.214c0,2.33-1.953,4.214-4.357,4.214c-2.403,0-4.351-1.885-4.351-4.214 C5.264,4.22,7.212,2.333,9.615,2.333z",
				"mail": "M4.916,14.045L25,30.477l20.084-16.432v-3.652H4.916V14.045z M4.916,36.411l9.864-10.958l-9.864-8.89V36.411z M45.084,36.679L34.942,25.492l10.142-8.797V36.679z M25,33.658l-8.216-6.833L4.916,39.606h40.168L33.198,26.825L25,33.658z"
			}
			function get(icon) {
				if(icons[icon]){
					return '<svg width="25" height="25" viewBox="0 5 50 55"><path d="' + icons[icon] + '" fill="#ffffff"></path></svg>';
				}
				return false;
			}
			return {
				get: get
			}
		})();
    
		function events(el) {
      var foregroundLayer = el.foreground_layer,
          backgroundLayer = el.background_layer;

      el.foreground_layer.addEventListener("mousemove", function (event) {
        const skewValue = 1.0;
        const widthPart = foregroundLayer.clientWidth / 3;
        
        if (event.offsetX <= widthPart) {
          foregroundLayer.style.transform = 'skewY(' + (-skewValue) + 'deg)';
          backgroundLayer.style.transform = 'skewY(' + skewValue + 'deg)';
          foregroundLayer.style.top = '-100px';
          backgroundLayer.style.top = '-2px';
        }
        if (event.offsetX >= widthPart && event.offsetX <= widthPart * 2) {
          foregroundLayer.style.transform = 'skewY(0deg)';
          backgroundLayer.style.transform = 'skewY(0deg)';
          foregroundLayer.style.top = '-99px';
          backgroundLayer.style.top = '-2px';
        }
        if (event.offsetX >= widthPart * 2) {
          foregroundLayer.style.transform = 'skewY(' + skewValue + 'deg)';
          backgroundLayer.style.transform = 'skewY(' + -skewValue + 'deg)';
          foregroundLayer.style.top = '-100px';
          backgroundLayer.style.top = '-2px';
        }
      });

      el.foreground_layer.addEventListener("mousedown", function (event) {
        foregroundLayer.style.top = '-97px';
        backgroundLayer.style.top = '-3px';
      });

      el.foreground_layer.addEventListener("mouseup", function(event){
        foregroundLayer.style.top = '-99px';
        backgroundLayer.style.top = '-2px';
      });

      el.foreground_layer.addEventListener("mouseout", function (event) {
        foregroundLayer.style.transform = 'skewY(0deg)';
        backgroundLayer.style.transform = 'skewY(0deg)';
        foregroundLayer.style.top = '-100px';
        backgroundLayer.style.top = '0px';
      });

    }

    function checkType(el) {
      var type = el.getAttribute("type");
			if (type &&	type.match(/^(facebook|github|codepen|linkedin|mail)$/i)) {
        var icon = Icons.get(type);
				// el.class = "sway-button " + type;
				// el.foreground_layer.className = el.class;
				if (icon) {
          el.foreground_layer.classList.add(type + '-fg-color');
          el.middle_layer.classList.add(type + '-md-color');
          el.svg_label.innerHTML = icon;
          el.text_label.innerHTML = String(type).capitalize();
				}
			} else {
        el.text_label.innerHTML = String('Button').capitalize();
      }
		}
   
		function init(el) {
			var clone = mainDoc.importNode(template, true);
			el.shadow = el.createShadowRoot();
			el.shadow.appendChild(clone);
      el.time = null;
      el.background_layer = el.shadow.querySelector('.background-layer');
      el.middle_layer = el.shadow.querySelector('.middle-layer');
      el.foreground_layer = el.shadow.querySelector('.foreground-layer');
      el.svg_label = el.shadow.querySelector('.svg-label');
      el.text_label = el.shadow.querySelector('.text-label');
      el.class = "sway-button";
    }
    
    var mainDoc = document,
			thisDoc = (mainDoc._currentScript || mainDoc.currentScript).ownerDocument,
			template = thisDoc.querySelector('template').content,
			element = Object.create(HTMLElement.prototype);
    
    element.createdCallback = function () {
      init(this);
      checkType(this);
			events(this);
    };
    
		element.attributeChangedCallback = function (attr, oldVal, newVal) {
    };
    
		mainDoc.registerElement('sway-button', {
			prototype: element
    });
    
  }) (window, document);
  
</script>
